# 软件可靠性增长模型实验平台（SRGM Lab）

基于 Python + Streamlit 实现的**软件可靠性增长模型（SRGM）可视化小平台**。  
支持上传故障时间数据，选择 GO / JM / MO / S 经典模型，一键完成：

- 参数估计与拟合
- 训练 / 验证集指标计算
- 课程设计要求的五种预测有效性检验（最小相关误差 / 拟合优度 / PLR / U 图 / Y 图）
- 图表展示与 PDF 报告导出



---

## 功能特点

### 1. 多模型支持（SRGM）

- **GO 模型**（Goel–Okumoto NHPP）
- **JM 模型**（Jelinski–Moranda）
- **MO 模型**（Musa–Okumoto）
- **S 形模型**（S-shaped）

所有模型都用极大似然估计参数，并划分训练 / 验证集进行对比。

### 2. 指标总览（对应课程 2.1 节）

平台会自动计算并展示：

- **训练集 / 验证集**：
  - MAE / AE（绝对误差 / 最后一时刻绝对误差）
  - RMSE（均方根误差）
  - MSPE（相对平方误差）
  - R² / ESS 等拟合优度指标  



> 说明：  
> - GO / MO / S 在**累计失效域**上评估  
> - JM 在**间隔域（Δt）**上评估，更符合模型假设

### 3. 可视化比较与诊断

在「模型比较与诊断」部分，提供四个标签页：

1. **累计失效曲线 m(t)**  
   - 展示真实累计失效曲线和各模型曲线  
   - 用虚线标出训练 / 验证集分界点  

2. **预测有效性诊断：五种方法**  
   对每个模型（除 JM）分别给出：

   - **最小相关误差**：残差一阶相关系数 ρ  
   - **拟合优度检验**：基于 U 序列的 K-S 检验  
   - **PLR 序列**：累计对数似然曲线  
   - **U 图**：故障时间标准化后与 U(0,1) 的 QQ 图  
   - **Y 图**：-ln(1-U) 变换后的诊断图（放大尾部差异）

3. **JM 间隔拟合**  
   - 在 Δt_k 域展示 JM 模型的期望间隔 vs 实际间隔  
   - 可以直观解释 “接近 N₀ 后故障间隔变长” 的现象

### 4. 一键导出 PDF 报告

- 使用 `reportlab` 生成 PDF：
  - 包含指标表
  - 包含各类图像（累计失效曲线 / PLR / U 图 / Y 图 / JM 间隔图）
- 文件名默认：`SRGM_Report.pdf`  


### 5. 中文友好显示

- 项目内置 **Noto Sans SC** 字体 (`fonts/NotoSansSC-Regular.ttf`)
- `viz_srgm.py` 中对 Matplotlib 进行了全局字体配置
- 本地运行 & Streamlit Cloud 部署时图表中的**中文标题与坐标轴**都能正常显示，不会出现乱码和方块

---

## 技术栈

- **Python 3.10+**
- **Streamlit**：交互式 Web 前端
- **NumPy / SciPy / pandas**：数据处理与统计计算
- **Matplotlib**：绘图与可视化
- **statsmodels / scikit-learn**：部分统计工具
- **reportlab**：PDF 报告生成
- **Noto Sans SC**：中文字体渲染

---


# 更新日志 (Changelog)

## [v2.0.0] - 2025-11-29

### 新增功能 (New Features)
- **引入数据驱动模型 (Data-Driven Models)**：
  - 新增 **GM(1,1) 灰色预测模型**：实现了基于累加生成（AGO）的小样本预测算法，适用于贫信息环境下的失效预测。
  - 新增 **ARIMA 时间序列模型**：基于 `statsmodels` 库，支持 $(p,d,q)$ 参数自定义，用于处理非平稳失效数据。
- **可视化升级**：
  - 重构绘图引擎：支持在同一坐标系下展示 SRGM 的连续曲线（$m(t)$）与时间序列模型的离散预测点（$t_i$）。
  - 新增 **模型诊断面板**：集成 U图、Y图、PLR（序列似然比）分析，对齐课程设计 1.2 节的理论要求。

### 代码重构 (Refactoring)
- **架构解耦**：
  - 新建 `time_series/` 模块，将物理参数模型（SRGM）与数据驱动模型逻辑分离。
  - 优化 `app_streamlit.py`：侧边栏支持独立选择 SRGM 或 TS 模型，互不干扰。
- **评估体系升级**：
  - 扩展 `metrics.py`：新增针对时间序列预测的评估适配（时间误差 vs 失效数误差）。
  - 优化结果缓存：使用 `st.session_state` 减少重复计算，提升页面响应速度。

### 问题修复 (Bug Fixes)
- 修复了 CSV 加载时对非严格递增时间序列的异常处理逻辑。
- 解决了 Matplotlib 在部分环境下中文负号显示为方块的问题。
- 修复了 PDF 报告生成时图表尺寸不统一的问题。

---

## [v2.1.0] - 2025-12-01

### 智能化升级 (AI & ML Integration)
- **引入机器学习模型**：
  - **SVR (支持向量回归)**：基于 `sklearn` 实现，引入 RBF 核函数与滑动窗口机制，捕捉非线性失效趋势。
  - **BP 神经网络 (MLP)**：实现了多层感知机回归模型，用于对比深度学习方法在可靠性预测中的表现。
- **参数交互增强**：
  - 为 SVR/BPNN 增加了“滑动窗口大小(Window Size)”、“隐藏层节点数”等超参数的实时调节功能。

### 数据与验证 (Data & Validation)
- **新增理想验证集 (`ideal_s_curve_data.csv`)**：
  - 构造了一组符合标准 S 形增长规律的模拟数据（60个观测点）。
  - 用于验证模型在无环境突变（Ideal Case）下的拟合能力，与 NTDS 真实数据的表现形成对照实验。

### 修复与优化
- 修复了 `fit_and_eval_time_series` 函数的参数传递 Bug。
- 优化了 matplotlib 中文显示配置，兼容更多运行环境。